<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Trip Check-In Bot</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <style>
    :root{
      --bg:#05070b;
      --card:#0f1420;
      --card-soft:#111827;
      --text:#e6edf6;
      --muted:#93a4b7;
      --accent:#7c3aed;
      --accent-soft:#4c1d95;
      --accent2:#22d3ee;
      --border:#1f2933;
      --danger:#ef4444;
      --ok:#10b981;
      --warn:#facc15;
      --shadow:0 18px 45px rgba(0,0,0,.6);
      --radius-lg:18px;
      --radius-sm:10px;
    }

    *{box-sizing:border-box;margin:0;padding:0}

    body{
      min-height:100vh;
      padding:24px;
      background:
        radial-gradient(950px 650px at 5% -10%, #1e293b 0%, transparent 60%),
        radial-gradient(950px 650px at 110% 110%, #0f172a 0%, transparent 55%),
        var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,Arial,sans-serif;
    }

    .app-shell{
      max-width:1040px;
      margin:0 auto;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      margin-bottom:20px;
    }

    header h1{
      font-size:26px;
      font-weight:650;
      letter-spacing:.02em;
      margin-bottom:4px;
    }

    header p{
      font-size:13px;
      color:var(--muted);
    }

    .pill-auth{
      align-self:flex-start;
      padding:6px 12px;
      border-radius:999px;
      background:rgba(16,185,129,.08);
      color:#bbf7d0;
      font-size:12px;
      display:flex;
      align-items:center;
      gap:6px;
    }

    .pill-auth-dot{
      width:8px;
      height:8px;
      border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 0 4px rgba(34,197,94,.25);
    }

    .card{
      background:radial-gradient(circle at top left,rgba(148,163,184,.12) 0,transparent 55%),var(--card);
      border-radius:var(--radius-lg);
      border:1px solid rgba(30,64,175,.55);
      box-shadow:var(--shadow);
      padding:20px 22px;
      margin-bottom:18px;
    }

    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:14px;
    }

    .card-title{
      font-size:14px;
      font-weight:600;
    }

    .card-subtitle{
      font-size:12px;
      color:var(--muted);
    }

    .task-section{
      background:var(--card-soft);
      border-radius:var(--radius-sm);
      border:1px solid var(--border);
      padding:12px;
      margin-bottom:12px;
    }

    .task-section-header{
      display:flex;
      justify-content:space-between;
      margin-bottom:6px;
    }

    .task-section-title{
      font-size:12px;
      font-weight:600;
    }

    .task-section-count{
      font-size:11px;
      color:var(--muted);
    }

    .task-row{
      display:flex;
      align-items:center;
      gap:12px;
      padding:6px 4px;
      border-radius:8px;
      cursor:pointer;
      font-size:12px;
      transition:background .12s ease;
    }

    .task-row:hover{
      background:rgba(30,64,175,.16);
    }

    /* =====================================================
       ✅ TRUE UI BUBBLES (REPLACES SYMBOLS)
    ===================================================== */

    .bubble{
      width:18px;
      height:18px;
      border-radius:50%;
      border:2px solid #64748b;
      position:relative;
      flex:0 0 18px;
      transition:.18s ease;
      box-shadow:none;
      background:transparent;
    }

    /* Hover glow */
    .task-row:hover .bubble{
      border-color:var(--accent2);
    }

    /* Inner dot */
    .bubble::after{
      content:"";
      position:absolute;
      inset:3px;
      border-radius:50%;
      background:transparent;
      opacity:0;
      transition:.16s ease;
    }

    /* CHECKED */
    .bubble-filled{
      border-color:var(--accent2);
      box-shadow:
        0 0 0 2px rgba(34,211,238,.2),
        0 0 8px rgba(34,211,238,.65);
    }

    .bubble-filled::after{
      background:var(--accent2);
      opacity:1;
      box-shadow:0 0 4px rgba(34,211,238,.85);
    }

    /* UNCHECKED */
    .bubble-empty{
      border-color:#64748b;
    }

    .task-label{
      flex:1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .no-tasks{
      color:var(--muted);
      font-size:11px;
      padding:4px 0 2px;
    }

    .hint{
      margin-top:6px;
      color:var(--muted);
      font-size:11px;
    }
  </style>
</head>

<body>
<div class="app-shell">

<header>
  <div>
    <h1>Trip Check-In Bot</h1>
    <p>Review Delivery / Pickup / Linehaul tasks — toggle bubbles to modify check-in state.</p>
  </div>

  <div class="pill-auth">
    <span class="pill-auth-dot"></span> Authenticated
  </div>
</header>

<div id="tasks"></div>

<p class="hint">
  Click any bubble row to toggle — glowing = checked in, hollow = open.
</p>

<script>
  // ============================================================
  // DEMO MOCK (replace with existing logic if already present)
  // ============================================================

  const tasks = [
    { do:"251100010923", pro:"50011223", pu:"7690001", type:"Delivery", complete:false },
    { do:"250000331573", pro:"", pu:"", type:"Linehaul", complete:true }
  ];

  const container = document.getElementById("tasks");

  render(tasks);

  function render(tasks){
    container.innerHTML = "";

    const sections = {
      Delivery: [],
      Pickup: [],
      Linehaul: []
    };

    tasks.forEach(t => {
      sections[t.type].push(t);
    });

    for(const k in sections){
      const sec = document.createElement("div");
      sec.className="task-section";

      sec.innerHTML=`
        <div class="task-section-header">
          <div class="task-section-title">${k} Tasks</div>
          <div class="task-section-count">(${sections[k].length})</div>
        </div>
      `;

      if(sections[k].length === 0){
        sec.innerHTML += `<div class="no-tasks">No ${k} tasks found.</div>`;
      }

      sections[k].forEach(task => {
        const row = document.createElement("div");
        row.className="task-row";

        const bubble = document.createElement("div");
        bubble.className="bubble " + (task.complete ? "bubble-filled" : "bubble-empty");

        row.appendChild(bubble);

        const label = document.createElement("div");
        label.className="task-label";

        label.textContent = task.type === "Linehaul"
          ? `LH# ${task.do}`
          : `DO ${task.do} | PRO ${task.pro || "—"} | PU ${task.pu || "—"}`;

        row.appendChild(label);

        row.addEventListener("click",() => {
          task.complete = !task.complete;
          bubble.classList.toggle("bubble-filled",task.complete);
          bubble.classList.toggle("bubble-empty",!task.complete);
        });

        sec.appendChild(row);
      });

      container.appendChild(sec);
    }
  }

</script>

</div>
</body>
</html>
